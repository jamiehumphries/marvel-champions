:root {
  --table-padding: 1rem;

  --cell-width: 5rem;
  --cell-height: 4rem;
  --scenario-cell-height: calc(var(--cell-height) * 0.65);
  --difficulty-cell-height: calc(
    var(--cell-height) - var(--scenario-cell-height)
  );

  --break-size: calc(var(--cell-width) / 10);

  --border-width: 1px;
  --border-color: black;
  --border--solid: var(--border-width) solid var(--border-color);
  --border--dashed: var(--border-width) dashed var(--border-color);

  --cell-background-color--default: #f2f2f2;
  --cell-background-color-hover--default: #e6e6e6;
  --cell-background-color--yes: #c6e0b4;
  --cell-background-color-hover--yes: #bcd5ab;
  --cell-background-color--no: #ffcccc;
  --cell-background-color-hover--no: #f2c2c2;
}

body {
  margin: 0;
  padding: 0;
}

/* Table settings */

#tracker {
  border-collapse: collapse;
}

/* Standard cells */

#tracker th,
#tracker td {
  padding: 0;
  font-weight: normal;
}

#tracker th > div,
#tracker td > div {
  display: flex;
  justify-content: center;
  align-items: center;

  box-sizing: border-box;
  border-right: var(--border--solid);
  border-bottom: var(--border--solid);

  --cell-background-color: var(--cell-background-color--default);
  --cell-background-color-hover: var(--cell-background-color-hover--default);
  background-color: var(--cell-background-color);

  width: var(--cell-width);
  height: var(--cell-height);
}

#tracker th > div {
  padding: calc(var(--cell-height) / 10) calc(var(--cell-width) / 10);
}

#tracker td > input[type="checkbox"] {
  position: absolute;
  z-index: -1;
}

#tracker td > div > label {
  display: flex;
  justify-content: center;
  align-items: center;

  cursor: pointer;

  width: 100%;
  height: 100%;

  font-size: calc(var(--cell-height) * 0.4);
}

.keyboard-nav #tracker td > input[type="checkbox"]:focus ~ div {
  outline: var(--outline);
  outline-offset: -1px;
  background-color: var(--cell-background-color-hover);
}

@media (hover: hover) {
  #tracker td > input[type="checkbox"]:hover ~ div {
    background-color: var(--cell-background-color-hover);
  }
}

#tracker td > input[type="checkbox"]:checked ~ div {
  --cell-background-color: var(--cell-background-color--yes);
  --cell-background-color-hover: var(--cell-background-color-hover--yes);
}

#tracker td > input[type="checkbox"]:checked ~ div > label::after {
  content: "✓";
}

#tracker td > input[type="checkbox"]:not(:checked):not(:indeterminate) ~ div {
  --cell-background-color: var(--cell-background-color--no);
  --cell-background-color-hover: var(--cell-background-color-hover--no);
}

#tracker
  td
  > input[type="checkbox"]:not(:checked):not(:indeterminate)
  ~ div
  > label::after {
  content: "✗";
}

/* Top left cells (Progress) */

#tracker thead > tr > th:first-child,
#tracker thead > tr:nth-child(2) > th:nth-child(2) {
  z-index: 1;
}

#tracker thead > tr:first-child > th:first-child > div {
  flex-direction: column;
  padding-bottom: 0;
}

#tracker #total-percentage {
  font-size: 1.2rem;
}

#tracker #total-fraction > span::before {
  content: "(";
}

#tracker #total-fraction > span::after {
  content: ")";
}

#tracker #total-fraction,
#tracker #standard-percentage,
#tracker #expert-percentage {
  font-size: 0.75rem;
}

/* First row cells (Progress + Scenario) */

#tracker thead > tr:first-child > th {
  position: sticky;
  top: 0;
  background-color: white;
  padding-top: var(--table-padding);
}

#tracker thead > tr:first-child > th > div {
  border-top: var(--border--solid);
  border-bottom: none;

  width: calc(var(--cell-width) * 2);
  height: var(--scenario-cell-height);
}

/* Second row cells (Progress + Difficulty) */

#tracker thead > tr:nth-child(2) > th {
  position: sticky;
  top: calc(var(--table-padding) + var(--scenario-cell-height));
  background-color: white;
}

#tracker thead > tr:nth-child(2) > th:nth-child(2) {
  position: sticky;
  left: calc(var(--table-padding) + var(--cell-width));
  background-color: white;
}

#tracker thead > tr:nth-child(2) > th > div {
  height: var(--difficulty-cell-height);
  font-size: 0.7rem;
}

#tracker thead > tr:nth-child(2) > th:nth-child(odd) > div {
  border-right: none;
}

/* First column cells (Progress + Hero) */

#tracker tr > th:first-child {
  position: sticky;
  left: 0;
  background-color: white;
  padding-left: var(--table-padding);
}

#tracker tr > th:first-child > div {
  border-left: var(--border--solid);
}

#tracker tbody > tr > th:first-child > div {
  width: calc(var(--cell-width) * 2);
}

/* Last row cells */

#tracker tbody > tr:last-child > th,
#tracker tbody > tr:last-child > td {
  padding-bottom: var(--table-padding);
}

/* Last column cells */

#tracker thead > tr > th:last-child,
#tracker tbody > tr > td:last-child {
  padding-right: var(--table-padding);
}

/* Body cells */

#tracker tbody > tr > td:nth-child(even) > div {
  border-right: var(--border--dashed);
}

/* Row and column breaks */

#tracker tr.row-break > th,
#tracker tr.row-break > td {
  padding-top: var(--break-size);
}

#tracker tr.row-break > th > div,
#tracker tr.row-break > td > div {
  border-top: var(--border--solid);
}

#tracker th.col-break,
#tracker td.col-break {
  padding-left: var(--break-size);
}

#tracker th.col-break > div,
#tracker td.col-break > div {
  border-left: var(--border--solid);
}
